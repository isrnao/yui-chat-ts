import{j as e,r as t}from"./vendor-react-D66VYGKs.js";import{f as s}from"./index-B8zgx_mg.js";import"./vendor-supabase-Cgw9WQ-u.js";function a(e){return"string"==typeof e&&36===e.length&&"7"===e.charAt(14)}function r({participants:t,currentTime:a}){const r=s(a).slice(0,5);return e.jsxs("div",{className:"text-xs mb-2 flex flex-wrap gap-2 items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["[",r,"]"]}),e.jsx("span",{className:"text-xs",children:"参加者:"}),0===t.length?e.jsx("b",{className:"text-xs",children:"（なし）"}):t.map((t=>e.jsx("span",{className:"font-bold text-xs",style:{color:t.color,marginLeft:6,marginRight:3,textShadow:"0 1px 1px #fff"},children:t.name},t.uuid)))]})}function n(e){return e.optimistic?"送信中...":s(e.time)}function i({chat:t}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-bold",style:{color:t.color,fontSize:"1.08em"},children:t.name}),t.email?e.jsx("a",{className:"font-bold text-gray-400 underline text-blue-600 px-1",href:`mailto:${t.email}`,title:t.email,target:"_blank",rel:"noopener noreferrer",children:">"}):e.jsx("span",{className:"font-bold text-gray-400 px-1",children:">"}),e.jsx("span",{className:"ml-1 text-gray-700",children:t.message}),e.jsxs("span",{className:"ml-2 text-xs text-gray-400 "+(t.optimistic?"animate-pulse":""),children:["(",n(t),")"]})]})})}function l({className:t=""}={}){return e.jsx("hr",{className:`bleed-x border-0 border-t-2 border-b border-t-ie-gray border-b-white h-0 my-2 ${t}`.trim()})}function c({chatLog:s,isLoading:n=!1,windowRows:c,participants:o,currentTime:m}){const x=function(e){return[...e].sort(((e,t)=>a(e.uuid)&&a(t.uuid)?t.uuid.localeCompare(e.uuid):t.time-e.time))}([...s]).slice(0,c),d=m??Date.now();return n?e.jsx("div",{className:"text-gray-400 mt-8 animate-pulse",children:"チャットログを読み込み中..."}):e.jsxs("div",{className:"overflow-y-auto rounded-none mt-2 pb-4 font-yui px-[var(--page-gap)]","data-testid":"chat-log-list",children:[e.jsx(r,{participants:o,currentTime:d}),e.jsx(l,{}),0===x.length&&e.jsx("div",{className:"text-gray-400 py-3",children:"まだ発言はありません。"}),x.map((s=>e.jsxs(t.Fragment,{children:[e.jsx(i,{chat:s}),e.jsx(l,{})]},s.uuid)))]})}export{c as default};
